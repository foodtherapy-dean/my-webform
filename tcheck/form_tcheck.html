<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>일별 점검</title>
<style>
  table { border-collapse: collapse; width: 100%; text-align: center; }
  th, td { border: 1px solid #999; padding: 4px; }
</style>
</head>
<body>
<h3>일별 점검</h3>
<table>
  <thead>
    <tr>
      <th rowspan="2">날짜</th>
      <th rowspan="2">요일</th>
      <th colspan="2">주간</th>
      <th colspan="2">월별</th>
    </tr>
    <tr>
      <th>방재점검</th>
      <th>기타청소</th>
      <th>CCP검증</th>
      <th>위생교육</th>
    </tr>
  </thead>
  <tbody id="dailyTableBody"></tbody>
</table>

<script>
const BASE_URL = "https://script.google.com/macros/s/AKfycbxXHby92qoccnlrQ1t8mNyq2jEUTM3hn8TnywpbeU2KXHs6NWZy7wHkkRm1uoxrPm3H7g/exec";

async function loadDaily(year, month) {
  const res = await fetch(`${BASE_URL}?mode=data&year=${year}&month=${month}`);
  const json = await res.json();
  if(!json.success) { alert("데이터 로드 실패"); return; }

  const tbody = document.getElementById("dailyTableBody");
  tbody.innerHTML = "";
  json.data.forEach(row => {
    const tr = document.createElement("tr");
    const d = new Date(row.date);
    const dayStr = ["일","월","화","수","목","금","토"][d.getDay()];
    tr.innerHTML = `<td>${d.getDate()}</td><td>${dayStr}</td>` + row.statusArray.map(s=>`<td>${s.status}</td>`).join("");
    tbody.appendChild(tr);
  });
}

// 오늘 기준으로 로드
const today = new Date();
loadDaily(today.getFullYear(), today.getMonth()+1);
</script>
</body>
</html>
